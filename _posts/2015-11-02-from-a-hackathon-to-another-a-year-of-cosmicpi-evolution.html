---
layout: post
status: publish
published: true
title: 'From a hackathon to another : a year of CosmicPi evolution'
author:
  display_name: Le√Øla Haegel
  login: leila
  email: leila.haegel@gmail.com
  url: ''
author_login: leila
author_email: leila.haegel@gmail.com
wordpress_id: 115
wordpress_url: http://cosmicpi.org/?p=115
date: '2015-11-02 09:41:22 +0100'
date_gmt: '2015-11-02 09:41:22 +0100'
categories:
- Blog
tags: []
comments:
- id: 709
  author: Bill Wallace
  author_email: wwal4436@bigpond.net.au
  author_url: ''
  date: '2015-11-05 00:07:40 +0100'
  date_gmt: '2015-11-05 00:07:40 +0100'
  content: "Following your team's developments with great interest.\r\nI built the
    Berkley Labs CRD in 2012 (the first in Australia) and gluing the scintillator
    paddles directly to the glass-encased PM tubes produced some tense moments.\r\nYour
    use of a fibre optics cable is intriguing.\r\nAre you gluing the fibre optics
    cable directly onto the SiPMD's?\r\nRegards\r\nBill Wallace"
- id: 727
  author: Le&iuml;la Haegel
  author_email: leila.haegel@cern.ch
  author_url: ''
  date: '2015-11-06 20:14:50 +0100'
  date_gmt: '2015-11-06 20:14:50 +0100'
  content: |-
    Hi Bill,
    yes, there is a connector holding the SiPM to the optic fiber and we'll glue them together.
    It is not the easiest thing in the world to do, for sure ! But the neatest.
- id: 1649
  author: A Raspberry Pi cosmic ray detector from folk at CERN - Raspberry Pi
  author_email: ''
  author_url: https://www.raspberrypi.org/blog/raspberry-pi-cosmic-ray-detector-from-cern/
  date: '2016-04-06 21:01:26 +0200'
  date_gmt: '2016-04-06 20:01:26 +0200'
  content: '[&#8230;] From a hackathon to another : a year of CosmicPi evolution [&#8230;]'
- id: 1653
  author: Steven Boelens
  author_email: steven@boelens.info
  author_url: ''
  date: '2016-04-07 15:00:34 +0200'
  date_gmt: '2016-04-07 14:00:34 +0200'
  content: I think that the calculations published here are a factor 1000 larger than
    in reality. The speed of light is not around 300 km/s but 300 thousand km/s.
    This leads to a maximum  time difference in the signal for both ends of 0.725
    ns and not 725 ns.
- id: 1657
  author: Le&iuml;la Haegel
  author_email: leila.haegel@gmail.com
  author_url: ''
  date: '2016-04-08 15:29:55 +0200'
  date_gmt: '2016-04-08 14:29:55 +0200'
  content: Absolutely right, this is corrected. Thanks for checking the calculations
    !
---
<p>On the first week-end of October, we were at CERN&acute;s Ideasquare participating in The Port 2015 hackathon. We gave an overview of the project in our final presentation, available to watch <a href="https://cds.cern.ch/record/2059362" target="_blank">here</a> and below.</p>
<p class="video">
  <iframe width="560" height="315" src="https://www.youtube.com/embed/UEV_bZdW7LM" frameborder="0" allowfullscreen></iframe>
  Our presentation at ThePort15 hackathon.
</p>
It was a good moment to gather and progress on making the CosmicPi, but also a good time to have a look backward as the team met thanks to the first hackathon by The Port in 2014.</p>
<p>&nbsp;</p>
<p><strong>&nbsp; Hackathon 2014</strong></p>
<p><a href="/blog/2015/04/15/the-birth-of-cosmic-pi.html">James had since a little while the idea of building a cosmic ray detector</a>. Talking around at CERN, he discovered that few other people were actually planning to design one for schools, and all those people gathered as a team to share their skills.</p>
<p>We had quite a lot of discussions about the design, and arrived at the first hackathon with minimal supply : the hardware part was a scintillator bar where the cosmic ray deposit energy&nbsp; when they cross it,&nbsp; an optic fiber to trap the light created by the cosmic ray, and a Silicon photomultiplier on each side&nbsp; to convert the light into electrons so they can be analysed by the computer.</p>
<div class="image"><a href="/uploads/bar_small.gif"><img src="/uploads/bar_small.gif" alt="That's all folks !" /></a><p>That's all folks !</p></div>

We wrapped the scintillator bar with black tape so it does not produce signals due to all the ambient light. And we added two AdvanSiD boards, which have an amplifier circuit allowing to increase the signal amplitude, as it was too small to be seen on the oscilloscope.</p>


<div class="image"><a href="/uploads/IMAG0319.jpg"><img src="/uploads/IMAG0319.jpg" alt="A well-wrapped scintillator bar and the two amplifier boards." /></a><p>A well-wrapped scintillator bar and the two amplifier boards.</p></div>

And here we were ! Cosmic ray pulses on the oscilloscope !</p>

<div class="image"><a href="/uploads/IMG_7059.jpg"><img src="/uploads/IMG_7059.jpg" alt="Yay !" /></a><p>Yay !</p></div>


<p><strong>towards&nbsp;Hackathon 2015</strong></p>
<p>But that was only the beginning. Then our head started to go all directions to think how we could go to the final product. First , we decided to increased the size of the scintillator to get more cosmic rays, which flux is ~1 per second per cm2. The curvy design of the fiber maximises the efficiency, the photons created by the cosmic ray being absorbed by the scintillator eventually.</p>

<div class="image"><a href="/uploads/IMAG0434-Medium.jpg"><img src="/uploads/IMAG0434-Medium.jpg" alt="The magic piece of scintillator without which we could not detector cosmic rays. " /></a><p>The magic piece of scintillator without which we could not detector cosmic rays.</p></div>


<p>Then, we needed to make sure the signal was coming from cosmic rays, and not noise (i.e. every signal not due to cosmic ray but ambient light, dark noise of the photomultiplier... and mimicking the cosmic ray signal). To reject noise, we required the signals on both photomultipliers to be in coincidence, which means to happen during the same time window. The time window had to take into account that a signal occurring at one end, let's say the right one, would arrive earlier to the right photomultiplier than the left one. So how long does it take for a photon to go from one side to another ? The refractive index of the core of the fiber is ~1.45, and characterise the ratio of the velocity of photons on vacuum with regards to the material. Knowing that the speed of light 300 000 Km/s, it means that inside the fiber it goes at 300 000 / 1.45 = 209 000 Km/s. In the case of the initial bar we had, the length of the bar being 15 cm, it takes ~0.72 ns to go from one end to the other. That is the minimum duration of the time window where we require two signals, but it is actually a little longer as it actually takes time for the cosmic ray to cross the scintillator.</p>
<div class="image"><a href="/uploads/IMAG0427.jpg"><img src="/uploads/IMAG0427.jpg" alt="A board that summarises the steps in the electronics. COIN is the coincidence of signals." /></a><p>A board that summarises the steps in the electronics. COIN is the coincidence of signals.</p></div>


Now that we were sure we had cosmic rays, the question was, what was interesting to do with ? It appears that the cosmic ray flux changes with the atmospheric condition, so we added temperature, pressure and humidity sensors so one can monitor the weather. We also included GPS so the flux could be monitored in the function of the altitude, and an accelerometer to know the position (vertical, horizontal) of the CosmicPi.</p>
<div class="image"><a href="/uploads/cosmicpi.png"><img src="/uploads/cosmicpi.png" alt="The CosmicPi is now a little weather station !" /></a><p>The CosmicPi is now a little weather station !</p></div>


We designed the prototype with Adafruit sensors, remained the question of how to get their data to the computer. We choosed to use an Arduino Due microcontroller to read the sensors. It is then connected to a Raspberry Pi to pre-process the data, store them and give them to the computer with an Ethernet cable.</p>
<div class="image"><a href="/uploads/IMAG0438_explained.jpg"><img src="/uploads/IMAG0438_explained.jpg" alt="The cosmic ray energy is detected on the scintillator slab (1) from the photomultipliers powered with a DC power supply (2). Their output as well as the ones of a set of atmosphere sensors (3) is sent to the Arduino Due microcontroller (4) for digitisation before a Raspberry Pi (5) stores the output and sends it to the computer when connected by Ethernet." /></a><p>The cosmic ray energy is detected on the scintillator slab (1) from the photomultipliers powered with a DC power supply (2). Their output as well as the ones of a set of atmosphere sensors (3) is sent to the Arduino Due microcontroller (4) for digitisation before a Raspberry Pi (5) stores the output and sends it to the computer when connected by Ethernet.</p></div>


So, it looks like we advanced well, no ? What is next to do is to design the analog part of the signal. The Raspberry Pi only takes digital signals, so the microcontroller digitises the output of the photomultipliers. The things is, the digitiser of the Arduino Due is quite slow with our two channels : it takes one value every 2 &mu;s, while our signal is about 20 ns, so 100 times faster ! The Arduino will not even have time to see it. So we need to design a shaper, which is a specific electronic circuit that increases the length of the signal. We managed to do this with bulky electronic modules, as shown on the video below, but the next step is to reduce it size to the CosmicPi size !</p>

<p class="video">
    <iframe width="560" height="315" src="https://www.youtube.com/embed/S5T_BNaTJ1Q" frameborder="0" allowfullscreen></iframe>
    A walk through the CosmicPi analog electronic test bench.
</p>


<p><strong>&nbsp; Hackathon 2015</strong></p>
<p class="video">
    <iframe width="560" height="315" src="https://www.youtube.com/embed/Ku9R7wFBfww" frameborder="0" allowfullscreen></iframe>
    Loads of little details to check... and a little piece of code arriving soon !
</p>
